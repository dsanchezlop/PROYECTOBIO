{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport { ref } from 'vue';\nexport default {\n  __name: 'SVGMap',\n  setup(__props, {\n    expose\n  }) {\n    expose();\n    const hoverValue = ref(\"Mouse your mouse\");\n    const selectedStates = ref([]);\n    const zoomLevel = ref(1);\n    const dragInfo = ref(null);\n    function clearSelection() {\n      // Vaciar el array de países seleccionados\n      selectedStates.value.splice(0);\n\n      // Deseleccionar todos los elementos del DOM que tengan la clase \"selectedPath\"\n      const selectedPaths = document.querySelectorAll(\".selectedPath\");\n      selectedPaths.forEach(element => {\n        element.classList.remove(\"selectedPath\");\n      });\n    }\n\n    //Adds to the path array a\n    function setSelectedPath(hvalue) {\n      if (hvalue.target.attributes[\"title\"]) {\n        if (hvalue != null && hvalue.target != null) {\n          // Verificar si el valor ya está seleccionado\n          const title = hvalue.target.attributes[\"title\"].value;\n          const id = hvalue.target.attributes[\"id\"].value;\n          const isSelected = selectedStates.value.some(item => item.id === id);\n          if (isSelected) {\n            // Si el valor ya está seleccionado, eliminarlo del array y eliminar la clase\n            selectedStates.value = selectedStates.value.filter(item => item.id !== id);\n            hvalue.target.classList.remove(\"selectedPath\");\n          } else {\n            // Si el valor no está seleccionado, agregarlo al array y agregar la clase\n            selectedStates.value.push({\n              id,\n              title\n            });\n            hvalue.target.classList.add(\"selectedPath\");\n          }\n        }\n      }\n    }\n    function changeHoverValue(hvalue) {\n      if (hvalue != null && hvalue.target != null) {\n        let title = hvalue.target.attributes[\"title\"];\n        if (title != null) {\n          hoverValue.value = title.value;\n        }\n      }\n    }\n    function zoomIn() {\n      zoomLevel.value /= 0.90;\n    }\n    function zoomOut() {\n      if (zoomLevel.value <= 0.6) {} else {\n        zoomLevel.value *= 0.90;\n      }\n    }\n    function getMousePosition(evt) {\n      var CTM = svg.getScreenCTM();\n      return {\n        x: (evt.clientX - CTM.e) / CTM.a,\n        y: (evt.clientY - CTM.f) / CTM.d\n      };\n    }\n\n    // function startDrag(evt) {\n    //   // store the initial mouse position and map position\n    //   dragInfo.value = {\n    //     x: evt.clientX,\n    //     y: evt.clientY,\n    //     mapX: parseFloat($refs.svgMap.style.left) || 0,\n    //     mapY: parseFloat($refs.svgMap.style.top) || 0,\n    //   };\n    //   // set cursor to grabbing\n    //   evt.target.style.cursor = 'grabbing';\n    // }\n\n    // function drag(evt) {\n    //   if (dragInfo.value) {\n    //     // calculate the offset between the current mouse position and the initial mouse position\n    //     const dx = evt.clientX - dragInfo.value.x;\n    //     const dy = evt.clientY - dragInfo.value.y;\n    //     // set the new map position based on the offset\n    //     $refs.svgMap.style.left = `${dragInfo.value.mapX + dx}px`;\n    //     $refs.svgMap.style.top = `${dragInfo.value.mapY + dy}px`;\n    //   }\n    // }\n\n    // function endDrag(evt) {\n    //   dragInfo.value = null;\n    //   evt.target.style.cursor = 'grab';\n    // }\n\n    const __returned__ = {\n      hoverValue,\n      selectedStates,\n      zoomLevel,\n      dragInfo,\n      clearSelection,\n      setSelectedPath,\n      changeHoverValue,\n      zoomIn,\n      zoomOut,\n      getMousePosition,\n      ref\n    };\n    Object.defineProperty(__returned__, '__isScriptSetup', {\n      enumerable: false,\n      value: true\n    });\n    return __returned__;\n  }\n};","map":{"version":3,"names":["ref","hoverValue","selectedStates","zoomLevel","dragInfo","clearSelection","value","splice","selectedPaths","document","querySelectorAll","forEach","element","classList","remove","setSelectedPath","hvalue","target","attributes","title","id","isSelected","some","item","filter","push","add","changeHoverValue","zoomIn","zoomOut","getMousePosition","evt","CTM","svg","getScreenCTM","x","clientX","e","a","y","clientY","f","d"],"sources":["/home/lasmas/GitHub/PROYECTOBIO/my-svg-map/src/components/SVGMap.vue"],"sourcesContent":["<template>\n   <button class=\"button-zoom\" @click=\"zoomIn\">+</button>\n   <button class=\"button-zoom\" @click=\"zoomOut\">-</button>\n   <br>\n   <button class=\"button-container\" @click=\"clearSelection\"> Clear Selection </button>\n\n   <div>\n      <h2> Selected Countries :</h2>\n      <div style=\"display:inline\">\n         <h4 style=\"display:inline; margin:10px;\" v-for=\"state in selectedStates\" :key=\"state.id\"> {{ state.id }} :\n            {{ state.title }} </h4>\n      </div>\n      <div style=\"display:flex; text-align: center; align-items: center;\">\n         <h2>Hovered Country:</h2>\n         <h3 style=\"color: black\"> {{ hoverValue }} </h3>\n      </div>\n   </div>\n   <div class=\"map-container\"\n    >\n      <!-- intentar que los path sean devuelto por la API -->\n      <svg xmlns:mapsvg=\"http://mapsvg.com\" version=\"1.1\" id=\"svg2\" ref=\"svgMap\"\n         mapsvg:geoViewBox=\"68.184010 37.084109 97.418146 6.753659\" width=\"1009.6727\" height=\"665.96301\"\n         :style=\"{ transform: `scale(${zoomLevel})` }\" @mouseover=\"changeHoverValue\" @click=\"setSelectedPath\"\n        >\n        <img href=\"../assets/world.svg\">\n\n         \n      </svg>\n\n\n   </div>\n</template>\n\n<script setup>\nimport { ref } from 'vue';\n\nconst hoverValue = ref(\"Mouse your mouse\");\nconst selectedStates = ref([]);\nconst zoomLevel = ref(1);\nconst dragInfo = ref(null);\n\n\nfunction clearSelection() {\n   // Vaciar el array de países seleccionados\n   selectedStates.value.splice(0);\n\n   // Deseleccionar todos los elementos del DOM que tengan la clase \"selectedPath\"\n   const selectedPaths = document.querySelectorAll(\".selectedPath\");\n   selectedPaths.forEach(element => {\n      element.classList.remove(\"selectedPath\");\n   });\n}\n\n//Adds to the path array a\nfunction setSelectedPath(hvalue) {\n   if (hvalue.target.attributes[\"title\"]) {\n      if (hvalue != null && hvalue.target != null) {\n         // Verificar si el valor ya está seleccionado\n         const title = hvalue.target.attributes[\"title\"].value;\n         const id = hvalue.target.attributes[\"id\"].value;\n         const isSelected = selectedStates.value.some(item => item.id === id);\n\n         if (isSelected) {\n            // Si el valor ya está seleccionado, eliminarlo del array y eliminar la clase\n            selectedStates.value = selectedStates.value.filter(item => item.id !== id);\n            hvalue.target.classList.remove(\"selectedPath\");\n         } else {\n            // Si el valor no está seleccionado, agregarlo al array y agregar la clase\n            selectedStates.value.push({ id, title });\n            hvalue.target.classList.add(\"selectedPath\");\n         }\n      }\n   }\n}\n\n\nfunction changeHoverValue(hvalue) {\n   if (hvalue != null && hvalue.target != null) {\n      let title = hvalue.target.attributes[\"title\"];\n      if (title != null) {\n         hoverValue.value = title.value;\n      }\n   }\n}\n\nfunction zoomIn() {\n   zoomLevel.value /= 0.90;\n}\n\nfunction zoomOut() {\n   if (zoomLevel.value <= 0.6) {\n\n   }\n   else {\n      zoomLevel.value *= 0.90;\n   }\n}\n\nfunction getMousePosition(evt) {\n   var CTM = svg.getScreenCTM();\n   return {\n      x: (evt.clientX - CTM.e) / CTM.a,\n      y: (evt.clientY - CTM.f) / CTM.d\n   };\n}\n\n// function startDrag(evt) {\n//   // store the initial mouse position and map position\n//   dragInfo.value = {\n//     x: evt.clientX,\n//     y: evt.clientY,\n//     mapX: parseFloat($refs.svgMap.style.left) || 0,\n//     mapY: parseFloat($refs.svgMap.style.top) || 0,\n//   };\n//   // set cursor to grabbing\n//   evt.target.style.cursor = 'grabbing';\n// }\n\n// function drag(evt) {\n//   if (dragInfo.value) {\n//     // calculate the offset between the current mouse position and the initial mouse position\n//     const dx = evt.clientX - dragInfo.value.x;\n//     const dy = evt.clientY - dragInfo.value.y;\n//     // set the new map position based on the offset\n//     $refs.svgMap.style.left = `${dragInfo.value.mapX + dx}px`;\n//     $refs.svgMap.style.top = `${dragInfo.value.mapY + dy}px`;\n//   }\n// }\n\n// function endDrag(evt) {\n//   dragInfo.value = null;\n//   evt.target.style.cursor = 'grab';\n// }\n\n\n\n</script>\n\n<style scoped>\n@keyframes slowchange {\n   to {\n      fill: indianred;\n   }\n}\n\n@keyframes hoverChange {\n   to {\n      fill: purple;\n   }\n}\n\npath {\n   fill: black;\n}\n\n.selectedPath {\n   animation-name: slowchange;\n   animation-duration: 1.5s;\n   animation-fill-mode: forwards;\n}\n\npath:hover {\n   animation-name: hoverChange;\n   animation-duration: 1s;\n   animation-fill-mode: forwards;\n}\n\n.logo {\n   height: 6em;\n   padding: 1.5em;\n   will-change: filter;\n}\n\n.logo:hover {\n   filter: drop-shadow(0 0 2em #646cffaa);\n}\n\n.logo.vue:hover {\n   filter: drop-shadow(0 0 2em #42b883aa);\n}\n\n.map-container {\n   width: 100vw;\n   /* ancho al 100% de la ventana */\n   /* height: 100vh; altura al 100% de la ventana */\n   display: flex;\n   justify-content: center;\n   /* centro horizontal */\n   align-items: center;\n   /* centro vertical */\n}\n\n.button-container {\n   position: relative;\n   z-index: 1;\n   margin-right: auto;\n   width: fit-content;\n   height: fit-content;\n}\n\n.button-zoom {\n   position: relative;\n   z-index: 1;\n   margin-right: auto;\n   width: 2%;\n   height: 2%;\n}\n\n.draggeable {\n   cursor: move;\n}\n</style>\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}