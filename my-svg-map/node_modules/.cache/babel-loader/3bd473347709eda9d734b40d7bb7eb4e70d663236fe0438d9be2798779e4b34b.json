{"ast":null,"code":"import { createElementVNode as _createElementVNode, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock } from \"vue\";\nconst _hoisted_1 = /*#__PURE__*/_createElementVNode(\"div\", {\n  id: \"chart\"\n}, null, -1 /* HOISTED */);\nconst _hoisted_2 = /*#__PURE__*/_createElementVNode(\"iframe\", {\n  src: \"https://ourworldindata.org/explorers/fertilizers?tab=chart&time=1961..2020&facet=none&country=Eastern+Asia~AFG~ALB&hideControls=true&Input=Synthetic+fertilizer&Nutrient=Nitrogen&Metric=Applied+%28per+hectare%29&Share+of+world+total=false\",\n  loading: \"lazy\",\n  style: {\n    \"width\": \"100%\",\n    \"height\": \"600px\",\n    \"border\": \"0px none\"\n  }\n}, null, -1 /* HOISTED */);\n\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  return _openBlock(), _createElementBlock(_Fragment, null, [_hoisted_1, _hoisted_2], 64 /* STABLE_FRAGMENT */);\n}","map":{"version":3,"names":["_createElementVNode","id","src","loading","style","_hoisted_1","_hoisted_2"],"sources":["C:\\Users\\daniv\\Documents\\GitHub\\PROYECTOBIO\\my-svg-map\\src\\components\\Charts.vue"],"sourcesContent":["<template>\n  <div id=\"chart\"></div>\n  <iframe src=\"https://ourworldindata.org/explorers/fertilizers?tab=chart&time=1961..2020&facet=none&country=Eastern+Asia~AFG~ALB&hideControls=true&Input=Synthetic+fertilizer&Nutrient=Nitrogen&Metric=Applied+%28per+hectare%29&Share+of+world+total=false\" loading=\"lazy\" style=\"width: 100%; height: 600px; border: 0px none;\"></iframe>\n</template>\n\n<script>\nexport default {\n  name: \"Charts\",\n  data() {\n    return {\n      countries: [],\n    };\n  },\n  created() {\n    // Get the countries from the url\n    this.countries = this.$route.query.countries.split(\",\");\n    // console.log(this.countries);\n  },\n  getDataFromAPI() {\n      const apiUrl = `http://49.12.36.190/api/fertilizers-${selectedFertilizer.value}-year?year=${this.selectedYear}`;\n\n      axios\n        .get(apiUrl)\n        .then((response) => {\n          const data = response.data;\n          this.updateMapValues(data);\n          \n        })\n        .catch((error) => {\n          console.error(error);\n        });\n    },\n    updateMapValues(data) {\n      const paths = document.querySelectorAll(\"path\");\n      const tooltip = document.createElement(\"div\"); // Creates the div element for the tooltip\n      tooltip.style.position = \"absolute\";\n      tooltip.style.backgroundColor = \"white\";\n      tooltip.style.border = \"1px solid gray\";\n      tooltip.style.padding = \"5px\";\n      tooltip.style.pointerEvents = \"none\";\n      tooltip.style.display = \"none\"; // Hides the tooltip by default\n      document.body.appendChild(tooltip); // Adds the tooltip to the body\n\n      paths.forEach((path) => {\n        const code = path.getAttribute(\"id\");\n        const value = data.find((item) => item.code === code)?.amount ?? 0;\n        path.setAttribute(\"amount\", value);\n\n        path.addEventListener(\"mouseover\", () => {\n          // Gets the mouse position and updates the tooltip\n          const x = event.clientX;\n          const y = event.clientY;\n          tooltip.style.top = `${y}px`;\n          tooltip.style.left = `${x}px`;\n          tooltip.style.display = \"block\"; // Shows the tooltip\n          tooltip.textContent = `${path.getAttribute(\"title\")}: ${value}`;\n        });\n\n        path.addEventListener(\"mousemove\", () => {\n          // Updates the tooltip while the mouse moves inside the \"path\"\n          const x = event.clientX;\n          const y = event.clientY;\n          tooltip.style.top = `${y}px`;\n          tooltip.style.left = `${x}px`;\n        });\n\n        path.addEventListener(\"mouseout\", () => {\n          // Hide the tooltip when the mouse leaves the \"path\" element\n          tooltip.style.display = \"none\";\n        });\n      console.log(data);\n\n      });\n    }\n};\n\n</script>\n"],"mappings":";gCACEA,mBAAA,CAAsB;EAAjBC,EAAE,EAAC;AAAO;gCACfD,mBAAA,CAA0U;EAAlUE,GAAG,EAAC,+OAA+O;EAACC,OAAO,EAAC,MAAM;EAACC,KAAqD,EAArD;IAAA;IAAA;IAAA;EAAA;;;;6DAD3QC,UAAsB,EACtBC,UAA0U,C"},"metadata":{},"sourceType":"module","externalDependencies":[]}